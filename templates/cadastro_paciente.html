{% extends "base.html" %}
{% block content %}
<div class="content-header">
    <h1><i class="fas fa-user-plus"></i> Cadastro de Paciente e Criação de Acesso</h1>
</div>

<div class="card" style="max-width: 800px; margin: 0 auto;">
    <form method="POST" action="{{ url_for('cadastro_paciente') }}">

        <h2>Dados do Paciente</h2>
        <hr>

        <div class="form-group">
            <label for="nome">Nome Completo</label>
            <input type="text" id="nome" name="nome" required value="{{ request.form.nome or '' }}">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" maxlength="14" required value="{{ request.form.cpf or '' }}">
            </div>
            <div class="form-group">
                <label for="telefone">Telefone</label>
                {# Adicionado maxlength="15" para a máscara (99) 99999-9999 #}
                <input type="text" id="telefone" name="telefone" placeholder="(00) 90000-0000" maxlength="15" required value="{{ request.form.telefone or '' }}">
            </div>
        </div>

        <div class="form-group">
            <label for="data_nascimento">Data de Nascimento</label>
            <input type="date" id="data_nascimento" name="data_nascimento" required value="{{ request.form.data_nascimento or '' }}">
        </div>

        <div class="form-group">
            <label for="historico_basico">Histórico Básico de Saúde</label>
            <textarea id="historico_basico" name="historico_basico" rows="4" placeholder="Ex: Hipertensão, Uso de medicação X, Dificuldade de locomoção.">{{ request.form.historico_basico or '' }}</textarea>
        </div>

        <h2 style="margin-top: 40px;">Dados de Acesso (Login)</h2>
        <hr>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="email">Email de Acesso</label>
                {# CAMPO NOVO: EMAIL #}
                <input type="email" id="email" name="email" required value="{{ request.form.email or '' }}">
            </div>
            <div class="form-group">
                <label for="senha">Senha de Acesso</label>
                {# CAMPO NOVO: SENHA #}
                <input type="password" id="senha" name="senha" required>
            </div>
        </div>

        <div style="text-align: right; margin-top: 30px;">
            {# BOTAO ATUALIZADO #}
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-user-check"></i> Cadastrar Paciente e Criar Conta
            </button>
        </div>
    </form>
</div>
{% endblock %}